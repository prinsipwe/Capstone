<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="plannerstyle.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>NutriTrack'r | Planner</title>
</head>

<body class="bg">
    <div class="container-fluid px-5 mt-5">
        <h2 class="head">Meal Planner</h2>

        <div class="information">
            Name: <span id="user-Name"> </span>
            <br>
            Age: <span id="edad"> </span>
            <br>
            BMI: <span id="stat"> </span>
        </div>

        <div class="table-responsive-lg">
            <table class="table table-light table-striped table-hover">
                <thead>
                    <tr>
                        <th scope="col" class="text-center txtcolor"></th>
                        <th scope="col" class="text-center txtcolor">Breakfast</th>
                        <th scope="col" class="text-center txtcolor">Lunch</th>
                        <th scope="col" class="text-center txtcolor">Dinner</th>
						<th scope="col" class="text-center txtcolor"></th>
                    </tr>
                </thead>    
                <tbody>
                    <tr>
                        <th scope="row" class="text-center">Sunday</th>
                        <td class="text-center" id="sunday-breakfast" ></td>
                        <td class="text-center" id="sunday-lunch"></td>
                        <td class="text-center" id="sunday-dinner"></td>
						<th scope="row" class="text-center"><button class="select-meals" data-day="Sunday" >Add to Planner</button></th>
                    </tr>
                    <tr>
                        <th scope="row" class="text-center">Monday</th>
                        <td class="text-center" id="monday-breakfast"></td>
                        <td class="text-center" id="monday-lunch"></td>
                        <td class="text-center" id="monday-dinner"></td>
						<th scope="row" class="text-center"><button class="select-meals" data-day="Monday" >Add to Planner</button></th>
                    </tr>
                    <tr>
                        <th scope="row" class="text-center">Tuesday</th>
                        <td class="text-center" id="tuesday-breakfast"></td>
                        <td class="text-center" id="tuesday-lunch"></td>
                        <td class="text-center" id="tuesday-dinner"></td>
						<th scope="row" class="text-center"><button class="select-meals" data-day="Tuesday" >Add to Planner</button></th>
                    </tr>
                    <tr>
                        <th scope="row" class="text-center">Wednesday</th>
                        <td class="text-center" id="wednesday-breakfast"></td>
                        <td class="text-center" id="wednesday-lunch"></td>
                        <td class="text-center" id="wednesday-dinner"></td>
						<th scope="row" class="text-center"><button class="select-meals" data-day="Wednesday" >Add to Planner</button></th>
                    </tr>
                    <tr>
                        <th scope="row" class="text-center">Thursday</th>
                        <td class="text-center" id="thursday-breakfast"></td>
                        <td class="text-center" id="thursday-lunch"></td>
                        <td class="text-center" id="thursday-dinner"></td>
						<th scope="row" class="text-center"><button class="select-meals" data-day="Thursday" >Add to Planner</button></th>
                    </tr>
                    <tr>
                        <th scope="row" class="text-center">Friday</th>
                        <td class="text-center" id="friday-breakfast"></td>
                        <td class="text-center" id="friday-lunch"></td>
                        <td class="text-center" id="friday-dinner"></td>
						<th scope="row" class="text-center"><button class="select-meals" data-day="Friday" >Add to Planner</button></th>
                    </tr>
                    <tr>
                        <th scope="row" class="text-center">Saturday</th>
                        <td class="text-center" id="saturday-breakfast"></td>
                        <td class="text-center" id="saturday-lunch"></td>
                        <td class="text-center" id="saturday-dinner"></td>
						<th scope="row" class="text-center"><button class="select-meals" data-day="Saturday" >Add to Planner</button></th>
                    </tr>
                </tbody>
            </table>
            <div class="btn">
                <a href="breakfast.html"><button id="back-btn">Go To Meals</button></a>
            </div>
        </div>
    </div>
    <script>
        // Retrieve user details from localStorage
        const userName = localStorage.getItem('user-Name');
        const age = localStorage.getItem('edad');
        const bmi = localStorage.getItem('stat');
        
        document.getElementById('user-Name').textContent = userName;
        document.getElementById('edad').textContent = age;
        document.getElementById('stat').textContent = bmi;
        
        // Retrieve and display selected meals
        const days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
        const meals = ["breakfast", "lunch", "dinner"];
        
        days.forEach(day => {
            meals.forEach(meal => {
                const selectedFood = localStorage.getItem(`${day}-${meal}-food`);
                const selectedFoodImage = localStorage.getItem(`${day}-${meal}-image`);
                if (selectedFood && selectedFoodImage) {
                    document.getElementById(`${day.toLowerCase()}-${meal}`).innerHTML = 
                        `<img src="${selectedFoodImage}" alt="${selectedFood}" width="100" height="80"><br>${selectedFood}`;
                }
            });
        });
        
        // Add event listener to all "Select Meals" buttons
        const selectMealButtons = document.querySelectorAll('.select-meals');
        selectMealButtons.forEach(button => {
            button.addEventListener('click', function () {
                const day = button.getAttribute('data-day');
                localStorage.setItem('selectedDay', day);
                window.location.href = 'breakfast.html';
            });
        });
    </script>
</body>
</html>
